
&НаКлиенте
Процедура ИНЗП_Заполнить(Команда)
	Если Объект.Состав.Количество() <> 0 Тогда 
		ТекстВопроса = НСтр("ru = 'При заполнении существующие данные будут очищены!
			|Продолжить?'");
		Оповещение = Новый ОписаниеОповещения("ВопросЗаполнитьДанныеЗавершение", ЭтотОбъект);
		ПоказатьВопрос(Оповещение, ТекстВопроса, РежимДиалогаВопрос.ДаНет);
	Иначе
		ЗаполнитьДанныеСервер();
	КонецЕсли;

КонецПроцедуры
	
&НаКлиенте
Процедура ВопросЗаполнитьДанныеЗавершение(Результат, ДополнительныеПараметры) Экспорт	
	Если Результат = КодВозвратаДиалога.Да Тогда
		ЗаполнитьДанныеСервер();
	КонецЕсли;	
КонецПроцедуры

&НаСервере
Процедура ЗаполнитьДанныеСервер()
	ОчиститьДанныеСервер();
	
	Запрос = Новый Запрос;
	Запрос.Текст = "ВЫБРАТЬ
	               |	ХозрасчетныйОстатки.Субконто1 КАК НоменклатурнаяГруппа,
	               |	ХозрасчетныйОстатки.СуммаОстатокДт как Сумма,
	               |	ХозрасчетныйОстатки.СуммаНУОстатокДт как СуммаНУ
	               |ИЗ
	               |	РегистрБухгалтерии.Хозрасчетный.Остатки(
	               |			&Дата,
	               |			Счет = &Счет,
	               |			,
	               |			Организация = &Организация
	               |				И Подразделение = &Подразделение) КАК ХозрасчетныйОстатки";
				   
	Запрос.УстановитьПараметр("Организация",Объект.Организация);
	Запрос.УстановитьПараметр("Подразделение",Объект.ПодразделениеОрганизации);
	Запрос.УстановитьПараметр("Счет",Объект.СчетЗатрат);
	Запрос.УстановитьПараметр("Дата",Объект.Дата);
	Результат = Запрос.Выполнить().Выгрузить(); 
	
	Объект.Состав.Загрузить(Запрос.Выполнить().Выгрузить());
КонецПроцедуры

&НаКлиенте
Процедура ИНЗП_Очистить(Команда)
	Если Объект.Состав.Количество() <> 0 Тогда 
		ТекстВопроса = НСтр("ru = 'Cуществующие данные будут очищены!
			|Продолжить?'");
		Оповещение = Новый ОписаниеОповещения("ВопросОчисткиДанныеЗавершение", ЭтотОбъект);
		ПоказатьВопрос(Оповещение, ТекстВопроса, РежимДиалогаВопрос.ДаНет);
	Иначе
		ОчиститьДанныеСервер();
	КонецЕсли;
КонецПроцедуры

&НаКлиенте
Процедура ВопросОчисткиДанныеЗавершение(Результат, ДополнительныеПараметры) Экспорт
	Если Результат = КодВозвратаДиалога.Да Тогда
		ОчиститьДанныеСервер();
	КонецЕсли;
КонецПроцедуры


&НаСервере
Процедура ОчиститьДанныеСервер()
	Объект.Состав.Очистить();	
КонецПроцедуры

